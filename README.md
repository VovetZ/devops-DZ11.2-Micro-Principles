
# Домашнее задание к занятию "Микросервисы: принципы"

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- Маршрутизация запросов к нужному сервису на основе конфигурации
- Возможность проверки аутентификационной информации в запросах
- Обеспечение терминации HTTPS

Обоснуйте свой выбор.

## Ответ

|   |Azure|Amazon|Yandex|Nginx|Haproxy|Kong|Apache APISIX|Tyk|Goku|Gloo|Istio|MuleSoft|Apigee|
|---|-----|------|------|-----|-------|----|-------------|---|----|----|-----|--------|------|
|Маршрутизация| V | V | V | V | V | V | V | V | V | V | V | V | V |
|Аутентификация| V | V | V | V | V | V | V | V | V | V | V | V | V |
|Терминация HTTPS| V | V | V | V | V | V | V | V | V | V | V | V | V |

Выбор будет зависеть от инфраструктуры и поставленных задач. 

Облачные API Gateway удобны в использовании и значительно экономят время разработки, поддерживают интеграцию с облачными сервисами и настраиваются очень быстро. 
Практически все крупные облачные провайдеры предоставляют собственную реализацию API gateway.
При условии, что проект будет размещаться в облаке, имеет смысл рассматривать готовое облачное решение.
Open Source решение - Kong, его базовый бесплатный функционал также удовлетворяет требованиям задачи.  

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- Поддержка кластеризации для обеспечения надежности
- Хранение сообщений на диске в процессе доставки
- Высокая скорость работы
- Поддержка различных форматов сообщений
- Разделение прав доступа к различным потокам сообщений
- Протота эксплуатации

Обоснуйте свой выбор.

## Ответ

| | Кластеризация | Хранение | Скорость | Форматы | Права | Простота |
|----------|---------------|----------|----------|---------|-------|----------|
| Kafka | + | + | + | + | + | ? |
| RabbitMQ | + | +/- | +/- | + | + | ? |
| Redis | + | - | + | + | + | ? |

Хотя Redis самый быстрый, но не соотвествует условиям, т.к. нет хранения на диск.
Видимо, среди этих вариантов выбираем Kafka. Это ПО более популярно, чем RabbitMQ. 
Kafka хранит данные у себя и после доставки сообщения, а так же выигрывает по скорости у RabbitMQ.
У Kafka лучше документация, больше сообщество - скорее всего и эксплуатировать будет проще.

---

#### [Дополнительные материалы: как запускать, как тестировать, как проверить](https://github.com/netology-code/devkub-homeworks/tree/main/11-microservices-02-principles)

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
